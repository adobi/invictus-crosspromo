(function(b,c,d){c.fn.touchwipe=function(f){var e={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(f){c.extend(e,f)}this.each(function(){var h;var g;var l=false;function k(){this.removeEventListener("touchmove",i);h=null;l=false}function i(p){if(e.preventDefaultEvents){p.preventDefault()}if(l){var m=p.touches[0].pageX;var q=p.touches[0].pageY;var o=h-m;var n=g-q;if(Math.abs(o)>=e.min_move_x){k();if(o>0){e.wipeLeft()}else{e.wipeRight()}}else{if(Math.abs(n)>=e.min_move_y){k();if(n>0){e.wipeDown()}else{e.wipeUp()}}}}}function j(m){if(m.touches.length==1){h=m.touches[0].pageX;g=m.touches[0].pageY;l=true;this.addEventListener("touchmove",i,false)}}if("ontouchstart" in document.documentElement){this.addEventListener("touchstart",j,false)}});return this};c.elastislide=function(e,f){this.$el=c(f);this._init(e)};c.elastislide.defaults={speed:450,easing:"",imageW:190,margin:3,border:2,minItems:1,current:0,onClick:function(){return false}};c.elastislide.prototype={_init:function(e){this.options=c.extend(true,{},c.elastislide.defaults,e);this.$slider=this.$el.find("ul");this.$items=this.$slider.children("li");this.itemsCount=this.$items.length;this.$esCarousel=this.$slider.parent();this._validateOptions();this._configure();this._addControls();this._initEvents();this.$slider.show();this._slideToCurrent(false)},_validateOptions:function(){if(this.options.speed<0){this.options.speed=450}if(this.options.margin<0){this.options.margin=4}if(this.options.border<0){this.options.border=1}if(this.options.minItems<1||this.options.minItems>this.itemsCount){this.options.minItems=1}if(this.options.current>this.itemsCount-1){this.options.current=0}},_configure:function(){this.current=this.options.current;this.visibleWidth=this.$esCarousel.width();if(this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin){this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems);this._setCurrentValues();this.fitCount=this.options.minItems}else{this._setDim();this._setCurrentValues()}this.$slider.css({width:this.sliderW})},_setDim:function(e){this.$items.css({marginRight:this.options.margin,width:(e)?e:this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.$items.outerWidth(true);this.sliderW=this.itemW*this.itemsCount;this.visibleWidth=this.$esCarousel.width();this.fitCount=Math.floor(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=c('<a class="carousel-control carousel-control-small left es-nav-next" href="#" >&lsaquo;</a>');this.$navPrev=c('<a class="carousel-control carousel-control-small right es-nav-prev" href="#">&rsaquo;</a>');c('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el)},_toggleControls:function(f,e){if(f&&e){if(e===1){(f==="right")?this.$navNext.show():this.$navPrev.show()}else{(f==="right")?this.$navNext.hide():this.$navPrev.hide()}}else{if(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount){this.$navNext.hide()}}},_initEvents:function(){var e=this;c(b).bind("resize.elastislide",function(f){e._setCurrentValues();if(e.visibleWidth<e.options.minItems*(e.options.imageW+2*e.options.border)+(e.options.minItems-1)*e.options.margin){e._setDim((e.visibleWidth-(e.options.minItems-1)*e.options.margin)/e.options.minItems);e._setCurrentValues();e.fitCount=e.options.minItems}else{e._setDim();e._setCurrentValues()}e.$slider.css({width:e.sliderW+10});clearTimeout(e.resetTimeout);e.resetTimeout=setTimeout(function(){e._slideToCurrent()},200)});this.$navNext.bind("click.elastislide",function(f){e._slide("right")});this.$navPrev.bind("click.elastislide",function(f){e._slide("left")});this.$items.bind("click.elastislide",function(f){e.options.onClick(c(this));return false});e.$slider.touchwipe({wipeLeft:function(){e._slide("right")},wipeRight:function(){e._slide("left")}})},_slide:function(f,e,g,m){if(this.$slider.is(":animated")){return false}var h=parseFloat(this.$slider.css("margin-left"));if(e===d){var i=this.fitCount*this.itemW,e;if(i<0){return false}if(f==="right"&&this.sliderW-(Math.abs(h)+i)<this.visibleWidth){i=this.sliderW-(Math.abs(h)+this.visibleWidth)-this.options.margin;this._toggleControls("right",-1);this._toggleControls("left",1)}else{if(f==="left"&&Math.abs(h)-i<0){i=Math.abs(h);this._toggleControls("left",-1);this._toggleControls("right",1)}else{var k;(f==="right")?k=Math.abs(h)+this.options.margin+Math.abs(i):k=Math.abs(h)-this.options.margin-Math.abs(i);if(k>0){this._toggleControls("left",1)}else{this._toggleControls("left",-1)}if(k<this.sliderW-this.visibleWidth){this._toggleControls("right",1)}else{this._toggleControls("right",-1)}}}(f==="right")?e="-="+i:e="+="+i}else{var k=Math.abs(e);if(Math.max(this.sliderW,this.visibleWidth)-k<this.visibleWidth){e=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth);if(e!==0){e+=this.options.margin}this._toggleControls("right",-1);k=Math.abs(e)}if(k>0){this._toggleControls("left",1)}else{this._toggleControls("left",-1)}if(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>k+this.options.margin){this._toggleControls("right",1)}else{this._toggleControls("right",-1)}}c.fn.applyStyle=(g===d)?c.fn.animate:c.fn.css;var j={marginLeft:e};var l=this;this.$slider.applyStyle(j,c.extend(true,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){if(m){m.call()}}}))},_slideToCurrent:function(f){var e=this.current*this.itemW;this._slide("",-e,f)},add:function(e,f){this.$items=this.$items.add(e);this.itemsCount=this.$items.length;this._setDim();this._setCurrentValues();this.$slider.css({width:this.sliderW});this._slideToCurrent();if(f){f.call(e)}},destroy:function(e){this._destroy(e)},_destroy:function(e){this.$el.unbind(".elastislide").removeData("elastislide");c(b).unbind(".elastislide");if(e){e.call()}}};var a=function(e){if(this.console){console.error(e)}};c.fn.elastislide=function(f){if(typeof f==="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var g=c.data(this,"elastislide");if(!g){a("cannot call methods on elastislide prior to initialization; attempted to call method '"+f+"'");return}if(!c.isFunction(g[f])||f.charAt(0)==="_"){a("no such method '"+f+"' for elastislide instance");return}g[f].apply(g,e)})}else{this.each(function(){var g=c.data(this,"elastislide");if(!g){c.data(this,"elastislide",new c.elastislide(f,this))}})}return this}})(window,jQuery);