!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.switchbtn.defaults,c),this.addChildren(),this.$element.on("click.switch.data-api",a.proxy(this.toggle,this))},toggle:function(a){var b=this.$element,c="disabled",d="active";if(b.attr(c)||b.hasClass(c))return;b.toggleClass(d),this.$checkbox&&this.$checkbox.attr("checked",b.hasClass(d))},addChildren:function(){var b=this.$element,c=this.options;b.empty(),this.$checkbox=c.checkbox&&a('<input type="checkbox"/>').attr("name",c.checkbox).attr("checked",b.hasClass("active")).appendTo(b),a("<span/>").addClass("switch-track").appendTo(b),a("<span/>").addClass("switch-thumb").attr("data-on",c.on).attr("data-off",c.off).appendTo(b)}},a.fn.switchbtn=function(c){return this.each(function(){var d=a(this),e=d.data("switch"),f=typeof c=="object"&&c;e||d.data("switch",e=new b(this,f)),c=="toggle"&&e.toggle()})},a.fn.switchbtn.defaults={on:"ON",off:"OFF",checkbox:!1},a.fn.switchbtn.Constructor=b,a(function(){a('[data-toggle="switch"]').each(function(){var b=a(this);b.switchbtn(b.data())})})}(window.jQuery),!function(a){"use strict",a.support.touch=function(){return"ontouchend"in document}();var b=function(b,c){this.$element=a(b),this.options=c,this.touch=this.build(),a.support.touch&&this.$element.on("touchstart",a.proxy(this.start,this)).on("touchmove",a.proxy(this.move,this)).on("touchend",a.proxy(this.end,this))};b.prototype={build:function(){return{startedAt:0,endedAt:0,startX:0,endX:0,startY:0,endY:0,isScroll:!1}},start:function(a){this.touch.startedAt=a.timeStamp,this.touch.startX=a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.pageX,this.touch.startY=a.originalEvent.touches?a.originalEvent.touches[0].pageY:a.pageY},move:function(a){this.touch.endX=a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.pageX,this.touch.endY=a.originalEvent.touches?a.originalEvent.touches[0].pageY:a.pageY,this.touch.isScroll=Math.abs(this.touch.endX-this.touch.startX)<Math.abs(this.touch.endY-this.touch.startY),!this.touch.isScroll&&a.preventDefault()},end:function(a){this.touch.endedAt=a.timeStamp;var b=this.touch.startX===0?0:Math.abs(this.touch.endX-this.touch.startX);!this.touch.isScroll&&this.touch.startedAt!==0&&this.touch.endedAt-this.touch.startedAt<this.options.touchMaxTime&&b>this.options.touchMaxDistance&&(this.touch.endX<this.touch.startX?this.$element.trigger("swipe",["left"]):this.touch.endX>this.touch.startX&&this.$element.trigger("swipe",["right"])),this.touch=this.build()}},a.fn.touch=function(c){return this.each(function(){var d=a(this),e=d.data("touch"),f=a.extend({},a.fn.touch.defaults,typeof c=="object"&&c);e||d.data("touch",e=new b(this,f))})},a.fn.touch.defaults={touchMaxTime:1e3,touchMaxDistance:50},a.fn.touch.Constructor=b}(window.jQuery),!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.carousel.defaults,c),this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this)),a.support.touch&&this.$element.touch()&&this.$element.on("swipe",a.proxy(this.swipe,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(a){return a||(this.paused=!0),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide"),k=this.$element.data("selected-platform");return this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),i=this,this.preload(e,function(){if(e.hasClass("active"))return;if(a.support.transition&&i.$element.hasClass("slide")){i.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),i.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{i.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),i.sliding=!1,i.$element.trigger("slid")}f&&i.cycle()}),this},swipe:function(a,b){this.options.pause in{swipe:1,both:1}&&this.pause(),b=="left"&&this.next(),b=="right"&&this.prev()},preload:function(b,c){if(!b)return;var d=b.find("img");return!d.attr("src")&&d.data("src")?(a("#loading-global").show(),d.attr("src",d.data("src")).load(function(){c(),a("#loading-global").hide()})):c(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c);e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"swipe"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e,f,g;if(c.is(".disabled, :disabled"))return;return f=c.attr("data-target"),f||(f=c.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),e=a(f),e.length||(e=c.parent()),g=e.hasClass("open"),d(),g||e.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var e=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.hide)return c.hide();clearTimeout(this.timeout),c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},isHTML:function(a){return typeof a!="string"||a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.isHTML(b)?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.isHTML(b)?"html":"text"](b),a.find(".popover-content > *")[this.isHTML(c)?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body").on("click.scroll.data-api",this.selector,d),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&c.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu")&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c=this,d,e;return this.query=this.$element.val(),this.query?(d=a.grep(this.source,function(a){return c.matcher(a)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},keypress:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.type!="keydown")break;a.preventDefault(),this.prev();break;case 40:if(a.type!="keydown")break;a.preventDefault(),this.next()}a.stopPropagation()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery),function(){var a;a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return a.nodeName==="OPTGROUP"?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){if(a.nodeName==="OPTION")return a.text!==""?(b!=null&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},a}(),a.select_to_array=function(b){var c,d,e,f,g;d=new a,g=b.childNodes;for(e=0,f=g.length;e<f;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=this,a=function(){function a(a,b){this.form_field=a,this.options=b!=null?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.default_text_default=this.is_multiple?"Select Some Options":"Select an Option",this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){return this.click_test_action=c(function(a){return this.test_active_click(a)},this),this.activate_action=c(function(a){return this.activate_field(a)},this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.choices=0,this.results_none_found=this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(a){if(!this.active_field)return setTimeout(c(function(){return this.container_mousedown()},this),50)},a.prototype.input_blur=function(a){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(c(function(){return this.blur_test()},this),100)},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),a.group_array_index!=null&&b.push("group-option"),a.classes!==""&&b.push(a.classes),c=a.style.cssText!==""?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")},a.prototype.results_update_field=function(){return this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale();switch(b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},a}(),b.AbstractChosen=a}.call(this),function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g=function(a,b){return function(){return a.apply(b,arguments)}};d=this,a=jQuery,a.fn.extend({chosen:function(c){return!a.browser.msie||a.browser.version!=="6.0"&&a.browser.version!=="7.0"?a(this).each(function(d){if(!a(this).hasClass("chzn-done"))return new b(this,c)}):this}}),b=function(){function b(){b.__super__.constructor.apply(this,arguments)}return f(b,AbstractChosen),b.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},b.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},b.prototype.set_up_html=function(){var b,d,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/(:|\.)/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),this.default_text=this.form_field_jq.data("placeholder")?this.form_field_jq.data("placeholder"):this.default_text_default,b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),d=this.container.height(),e=this.f_width-c(this.dropdown),this.dropdown.css({width:e+"px",top:d+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-c(this.search_container)-c(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},b.prototype.register_observers=function(){this.container.mousedown(g(function(a){return this
.container_mousedown(a)},this)),this.container.mouseup(g(function(a){return this.container_mouseup(a)},this)),this.container.mouseenter(g(function(a){return this.mouse_enter(a)},this)),this.container.mouseleave(g(function(a){return this.mouse_leave(a)},this)),this.search_results.mouseup(g(function(a){return this.search_results_mouseup(a)},this)),this.search_results.mouseover(g(function(a){return this.search_results_mouseover(a)},this)),this.search_results.mouseout(g(function(a){return this.search_results_mouseout(a)},this)),this.form_field_jq.bind("liszt:updated",g(function(a){return this.results_update_field(a)},this)),this.search_field.blur(g(function(a){return this.input_blur(a)},this)),this.search_field.keyup(g(function(a){return this.keyup_checker(a)},this)),this.search_field.keydown(g(function(a){return this.keydown_checker(a)},this));if(this.is_multiple)return this.search_choices.click(g(function(a){return this.choices_click(a)},this)),this.search_field.focus(g(function(a){return this.input_focus(a)},this))},b.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},b.prototype.container_mousedown=function(b){var c;if(!this.is_disabled)return c=b!=null?a(b.target).hasClass("search-choice-close"):!1,b&&b.type==="mousedown"&&b.stopPropagation(),!this.pending_destroy_click&&!c?(this.active_field?!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)&&(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},b.prototype.container_mouseup=function(a){if(a.target.nodeName==="ABBR")return this.results_reset(a)},b.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},b.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},b.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},b.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},b.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.find("span").text(this.default_text),this.form_field.options.length>this.disable_search_threshold?this.container.removeClass("chzn-container-single-nosearch"):this.container.addClass("chzn-container-single-nosearch")),a="",f=this.results_data;for(c=0,e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},b.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},b.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight();if(b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(c<f)return this.search_results.scrollTop(c)}},b.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},b.prototype.results_show=function(){var a;return this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)),a=this.is_multiple?this.container.height():this.container.height()-1,this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},b.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},b.prototype.set_tab_index=function(a){var b;if(this.form_field_jq.attr("tabindex"))return b=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",b):(this.selected_item.attr("tabindex",b),this.search_field.attr("tabindex",-1))},b.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},b.prototype.search_results_mouseup=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b)},b.prototype.search_results_mouseover=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c)return this.result_do_highlight(c)},b.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()},b.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},b.prototype.choice_build=function(b){var c,d;return c=this.container_id+"_c_"+b.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>'),d=a("#"+c).find("a").first(),d.click(g(function(a){return this.choice_destroy_link_click(a)},this))},b.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},b.prototype.choice_destroy=function(a){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(a.attr("rel")),a.parents("li").first().remove()},b.prototype.results_reset=function(b){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.show_search_field_default(),a(b.target).remove(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},b.prototype.result_select=function(a){var b,c,d,e;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()},b.prototype.result_activate=function(a){return a.addClass("active-result")},b.prototype.result_deactivate=function(a){return a.removeClass("active-result")},b.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change"),this.search_field_scale()},b.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},b.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;this.no_results_clear(),i=0,j=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),f=new RegExp("^"+j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),m=new RegExp(j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),r=this.results_data;for(n=0,p=r.length;n<p;n++){c=r[n];if(!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1,h=c.dom_id,g=a("#"+h);if(f.test(c.html))b=!0,i+=1;else if(c.html.indexOf(" ")>=0||c.html.indexOf("[")===0){e=c.html.replace(/\[|\]/g,"").split(" ");if(e.length)for(o=0,q=e.length;o<q;o++)d=e[o],f.test(d)&&(b=!0,i+=1)}b?(j.length?(k=c.html.search(m),l=c.html.substr(0,k+j.length)+"</em>"+c.html.substr(k+j.length),l=l.substr(0,k)+"<em>"+l.substr(k)):l=c.html,g.html(l),this.result_activate(g),c.group_array_index!=null&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&h===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(g))}}return i<1&&j.length?this.no_results(j):this.winnow_results_set_highlight()},b.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val(""),c=this.search_results.find("li"),f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b=a(b),f.push(b.hasClass("group-result")?b.css("display","auto"):!this.is_multiple||!b.hasClass("result-selected")?this.result_activate(b):void 0);return f},b.prototype.winnow_results_set_highlight=function(){var a,b;if(!this.result_highlight){b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}},b.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},b.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},b.prototype.keydown_arrow=function(){var b,c;this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b)));if(!this.results_showing)return this.results_show()},b.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},b.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},b.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},b.prototype.keydown_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},b.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(i=0,j=g.length;i<j;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})}},b.prototype.generate_random_id=function(){var b;b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(a("#"+b).length>0)b+=this.generate_random_char();return b},b}(),c=function(a){var b;return b=a.outerWidth()-a.width()},d.get_side_border_padding=c}.call(this),function(a,b,c,d){function g(b,c){this.element=b,this.options=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="charcounter",f={limit:140,warning:15,warningClass:"badge-warning",exceededClass:"badge-important",defaultClass:"badge-info",notAllowOverflow:!0,fontSize:"1.1em"};g.prototype.init=function(){var c=a(this.element),d=c.outerWidth(),e=this;c.data("limit")&&(e.options.limit=c.data("limit")),c.data("warning")&&(e.options.limit=c.data("warning")),b.a=c,c.parents(c.data("parent")).nextAll(c.data("prepend")).prepend(a("<span />",{"class":"badge char-counter",html:this.options.limit}).addClass(this.options.defaultClass).css("font-size",this.options.fontSize)),c.on("charcounter.recount keyup change focus blur",function(b){e.options.notAllowOverflow?e.handle(a(this).val())||a(this).val(a(this).val().substring(0,e.options.limit)):e.handle(a(this).val())}),e.handle(c.val())},g.prototype.handle=function(b){var c=a(this.element),d=c.parents(c.data("parent")).nextAll(c.data("prepend")).find(".char-counter"),e=b.length,f=this.options.limit-e,g;return f<=this.options.limit&&(d.removeClass(this.options.exceededClass).removeClass(this.options.warningClass).addClass(this.options.defaultClass),g=!0),f<this.options.warning&&(d.removeClass(this.options.defaultClass).addClass(this.options.warningClass),g=!0),f<=0&&(d.removeClass(this.options.warningClass).addClass(this.options.exceededClass),g=!1,f=0),d.html(f),g},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})},a(function(){a("[data-countable=1]").charcounter()})}(jQuery,window,document),!function(a){"use strict";var b=function(b,c){b&&(this.el=a(b),this.href=this.el.attr("href"),this.type=this.el.data("type")),this.container=c||a(".sidebar-navigation-wrapper-right .well")};b.reloadContetPanel=function(){App.Tooltip("hide"),a(".content-wrapper").load(a(".left-side-nav .active a").attr("href"),function(){b.initContentPanel()})},b.CloseRightPanel=function(){(new b).closeRightPanel()},b.reloadRightPanel=function(){App.Tooltip("hide"),a(".sidebar-navigation-wrapper-right .well").load(App.CurrentHref,b.initRightPanel)},b.initRightPanel=function(){App.Datepicker(),a(".fileupload").length?a(".fileupload").each(function(){var b=a(this);a(this).fileupload({dropZone:a(this)}).bind("fileuploadstop",function(){App.CurrentPlatform=b.data("platform-id"),a(".item.selected").find(".icon-picture").parent().trigger("click")})}):App.PrettifyUpload(),App.Tooltip("hide"),App.Tooltip(),App.AutoHeight(),App.enhanceChosen(),a(".sidebar-navigation-wrapper-right .controls:first").children(":first").focus(),a(".items[data-platform-id="+App.CurrentPlatform+"]").prevAll("legend:first").find(".toggle-platform-images").trigger("click"),!a(".game-platforms").length},b.initContentPanel=function(){App.Tooltip("hide")},b.buildRightPanelTemplate=function(){a.getJSON(App.URL+"game/all",function(b){App.Template.load("games/all.html",a(".right-side-scroll"),b,function(){App.Crosspromo&&App.Crosspromo.DragAndDropGames(),App.Tooltip()}),App.Template.load("platforms/filter.html",a(".platforms-filter-bar"),b)})},b.prototype={loadIntoRightPanel:function(){a("[rel=tooltip]").tooltip("hide");var c=this;a("#list-of-all-games .btn-group").length&&(a("#list-of-all-games .btn-group").find(".active").removeClass("active"),c.el.addClass("active")),a.ajax({url:c.href,type:c.type||"GET",success:function(a){c.el&&c.el.data("trigger")==="reload"?c.el.data("location")==="r"&&b.reloadRightPanel():(c.container.html(a),b.initRightPanel())}})},setHref:function(a){return this.href=a,this},closeRightPanel:function(){this.container.empty()},submitForm:function(){var c=this.el,d=c.find("button");d.attr("disabled",!0),a.post(c.attr("action"),c.serialize(),function(e){c.data("trigger")==="back"?a(".prev-right-panel").trigger("click"):d.data("trigger")==="reload"?(d.data("location")==="r"&&b.reloadRightPanel(),d.data("location")==="b"&&(b.reloadContetPanel(),b.reloadRightPanel()),d.data("location")==="l"&&b.reloadContetPanel()):d.data("noaction")||(b.reloadContetPanel(),b.reloadRightPanel()),e!=="Saved"?(e=a.parseJSON(e),App.Message=e.message,e.success&&b.reloadRightPanel()):App.Message=e,d.attr("disabled",!1)})}},a(function(){b.buildRightPanelTemplate(),a("body").on("reload.content",b.reloadContetPanel),a("body").delegate(".left-side-nav a","click",function(a){}),a("body").delegate("[data-ajax-link]","click",function(c){(new b(this)).loadIntoRightPanel(),App.CurrentHref=a(this).attr("href"),c.preventDefault()}),a("body").delegate("[data-contet-ajax-link]","click",function(c){a.get(a(this).attr("href"),function(){b.reloadContetPanel()}),c.preventDefault()}),a("body").delegate("[data-close-right]","click",function(a){(new b(this)).closeRightPanel(),a.preventDefault()}),a("body").delegate("[data-ajax-form]","submit",function(a){(new b(this)).submitForm(),a.preventDefault()}),App.Nav=b})}(jQuery),!function(a){"use strict",App._templatesDir="scripts/templates/";var b={initPartials:function(){Handlebars.registerPartial("filter_platforms_item",'<li><a href="#" data-platform="{{id}}">{{name}}</a></li>'),Handlebars.registerHelper("dropdown_list",function(a,b,c){if(!b)return!1;var d='<select name="'+a+'">';for(var e=0;e<b.length;e++)d+='<option value="'+b[e].id+'"',b[e].id===c&&(d+=' selected="selected"'),d+=">"+b[e].name+"</option>";return d+="</select>",new Handlebars.SafeString(d)}),Handlebars.registerHelper("is_checked",function(a){if(a==="1")return'checked="checked"'}),Handlebars.registerHelper("is_active",function(a){return a==="1"?"btn-success":"btn-danger"}),a.get(App._templatesDir+"games/list_item.html"+"?"+(new Date).getTime(),function(a){Handlebars.registerPartial("game_list_item",a)}),a.get(App._templatesDir+"crosspromo/list_item.html"+"?"+(new Date).getTime(),function(a){Handlebars.registerPartial("crosspromo_list_item",a)}),a.get(App._templatesDir+"crosspromo/type_item.html"+"?"+(new Date).getTime(),function(a){Handlebars.registerPartial("crosspromo_type_item",a)})},load:function(b,c,d,e){a.get(App.URL+App._templatesDir+b+"?"+(new Date).getTime(),function(a){var b=Handlebars.compile(a);c.html(b(d)),e&&e()})}};a(function(){b.initPartials()}),App.Template={initPartials:b.initPartials,load:b.load}}(jQuery),!function(a){var b={bindEvents:function(){var b=this;a("body").on("click",".toggle",function(c){b.toggle(a(this)),c.preventDefault()}),a("body").on("click",".editable",function(c){b.editable(a(this)),c.preventDefault()}),a("body").on("submit",".new-list-form",function(c){b.saveItem(a(this)),c.preventDefault()}),a("body").on("click",".delete-list-item",function(c){c.preventDefault(),b.deleteItem(a(this))}),a("body").on("keyup","#quick-search-by-game-name",function(c){c.preventDefault(),b.filterByName(a(this))}),a("body").on("click",".all-games li",function(b){b.preventDefault(),a(this).toggleClass("selected-game")}),a("body").on("click",".edit-description",function(c){c.preventDefault(),b.editModal(a(this))}),a("body").on("submit","#edit-description-form",function(c){c.preventDefault(),b.saveDescription(a(this))}),a("body").on("change",".switch-value",function(c){c.preventDefault(),b.switchValue(a(this))}),a("body").on("click",".edit-list-modal",function(c){c.preventDefault(),b.editListModal(a(this))}),a("body").on("click",".delete-image",function(c){c.preventDefault(),b.deleteImage(a(this))}),a("body").on("click",".edit-type-modal",function(c){c.preventDefault(),b.editTypeModal(a(this))}),a("body").on("click",".delete-type",function(c){c.preventDefault(),b.deleteType(a(this))}),b.dragAndDropTypes()},dragAndDropTypes:function(){var b=this;a("body").on("mouseenter",".types-list li",function(){var b=a(this);b.is(":data(draggable)")||b.draggable({appendTo:".dnd-helper",helper:"clone",start:function(b,c){console.log(a(c.helper)),a(c.helper).find("img, .caption").hide()}})}),a("body").on("mouseenter",".type-drop",function(){var c=a(this);c.droppable({hoverClass:"dnd-li-active-small",accept:".type-item",drop:function(c,d){var e=a(this),f=a(d.draggable);b.save("crosspromo/add_type/"+e.data("crosspromo-id"),{type_id:f.data("type-id")},function(){var a=e.find(".crosspromo-type");a.html(f.find("h6").html()),e.find(".type-drop h6").attr("data-type-id",f.data("type-id"))})}})})},editTypeModal:function(b){this.editModalTriggerElement=b,a.get(App.URL+"crosspromotype/get/"+b.data("type-id"),function(b){App.Template.load("type/edit.html",a("#dummy-container"),a.parseJSON(b),function(){var b=a("#edit-type-modal");b.modal()})})},deleteType:function(b){var c=b.data("id");this.remove("crosspromotype/delete/"+c,function(){b.parents("li:first").remove(),a("#crosspromo-lists").find("[data-type-id="+c+"]").html("Drag type here")})},deleteImage:function(b){var c=b.data("id"),d=b.data("url");this.remove(d+c,function(){b.parent().html('<input type="file" name="image">'),a("#"+c).find("legend").find("img").remove()})},switchValue:function(a){var b={};b[a.attr("name")]=a.is(":checked")?a.val():0,this.save("crosspromolist/switch_value/"+a.data("crosspromo-id"),b,function(){a.parent().toggleClass("btn-success").toggleClass("btn-danger")})},saveDescription:function(b){var c=this.editModalTriggerElement;c.data("crosspromo-id")&&this.save("crosspromo/save_description_to_item/"+this.editModalTriggerElement.data("crosspromo-id"),b.serializeObject(),function(){var d=c.parents(".item"),e=d.find(".promo-price"),f=d.find(".price");d.find(".badge").show(),d.find(".description").html(b.find("textarea").val()),d.find(".crosspromo-type").html(b.find("[name=type_id] option:selected").text()),b.find("[name=promo_price]").val().length&&b.find("[name=promo_price]").val()!="0"?(e.html(b.find("[name=promo_price]").val()),f.html("<del>"+f.html()+"</del>")):(e.html(""),f.html(f.find("del").html())),a("#edit-description-modal").modal("hide"),b.find("button").attr("disabled",!1)})},editModal:function(b){this.editModalTriggerElement=b,a.get(App.URL+"crosspromo/get/"+b.data("crosspromo-id"),function(b){App.Template.load("crosspromo/edit.html",a("#dummy-container"),a.parseJSON(b),function(){var b=a("#edit-description-modal");b.modal(),App.Datepicker()})})},editListModal:function(b){var c=function(b){App.Template.load("crosspromo/edit_list.html",a("#dummy-container"),b,function(){var b=a("#edit-list-modal");b.modal()})};this.editModalTriggerElement=b,a.getJSON(App.URL+"crosspromolist/get/"+b.data("list-id"),c)},filterByName:function(b){var c=b.val(),d=a(".all-games li");a.trim(c).length?a.each(d,function(b,d){var e=a(d).find("h6").attr("data-original-title");e.toLowerCase().indexOf(c.toLowerCase())===-1?a(d).hide():a(d).is(":hidden")&&a(d).show()}):d.show()},toggle:function(a){var b=a.parents(a.data("parent")).find(a.data("target"));b.toggle(),b.find("input:first, textarea:first").focus()},editable:function(b){var c=b,d=c.parents(c.data("parent")).find(c.data("target")),e=d.text(),f=a('<input class="span2" type="text" name="name" value="'+e+'" /> <a href="#" class="btn btn-primary button-save"><i class="icon-white icon-ok"></i></a>"'),g=this;d.html(f),d.find(".button-save").on("click",function(b){var e={},f=a(".csrf-form").find("[type=hidden]").attr("name"),h=a(".csrf-form").find("[type=hidden]").attr("value"),i=d.find("input");b.preventDefault(),e[f]=h,e.name=i.val(),g.save("crosspromolist/edit/"+c.data("id"),e,function(a){d.html(i.val())},function(){})})},saveItem:function(b){var c=b,d=Handlebars.compile("{{>crosspromo_type_item}}"),e=b.serializeObject();name=a(".csrf-form").find("[type=hidden]").attr("name"),value=a(".csrf-form").find("[type=hidden]").attr("value"),post={},post[name]=value,a.extend(post,e),post.game_id=a("#crosspromo_base_game").val(),this.save("crosspromolist/edit/",post,function(c){a(b.data("append-to")).append(d(c)),a(".new-form").hide(),a(".new-form input").val(""),b.find("[type=submit]").attr("disabled",!1),App.Crosspromo.sortable(a(".crosspromo-list-items"),App.Crosspromo.UpdateOrder),App.Crosspromo.sortable(a("#crosspromo-lists"),App.Crosspromo.UpdateOrder),App.Crosspromo.DragAndDropGames()},function(){})},deleteItem:function(b){var c=b,d=c.data("id");a.get(App.URL+"crosspromolist/delete/"+d,function(a){b.parents(".crosspromo-type").remove(),App.Tooltip("hide")})},request:function(b,c,d){var e={};a.extend(e,b),e.url=App.URL+e.url;var f=a.ajax(e);typeof c=="function"&&f.done(c),typeof d=="function"&&f.fail(d)},remove:function(a,b,c){this.request({url:a,type:"GET"},b,c)},save:function(b,c,d,e){var f=a(".csrf-form").find("[type=hidden]").attr("name"),g=a(".csrf-form").find("[type=hidden]").attr("value");c[f]=g,this.request({url:b,data:c,type:"POST"},d,e)}};a(function(){b.bindEvents()}),App.Utils=b}(jQuery),!function(a){"use strict";var b=function(a){this.el=a};b.WarningModal=a("#overwrite-warning"),b.BaseGameId=0,b.UpdateOrder=function(b,c){var d={},e=a(".csrf-form").find("[type=hidden]").attr("name"),f=a(".csrf-form").find("[type=hidden]").attr("value");d[e]=f,d.order=b,c||(c="");var g=App.URL+"crosspromo"+c+"/update_order/";a.post(g,d,function(){})},b.DragAndDropGames=function(){a("body").on("mouseenter",".all-games li",function(){var b=a(this);b.is(":data(draggable)")||b.draggable({appendTo:".dnd-helper",helper:function(){var b=a(".all-games .selected-game"),c=a("<div />").attr("id","games-draggable-container");return b.length||(b=a(this)),c.append(b.clone()),c},start:function(a,b){b.helper.find(".caption").show()}})}),a("body").on("mouseenter",".accordion-inner .thumbnails li",function(){var c=a(this);c.droppable({hoverClass:"dnd-li-active",accept:":not(.ui-sortable-helper, .type-item)",drop:function(c,d){var e=a(this);a.each(d.helper.children(),function(c,d){var f=a(d).clone(),g=e;f.find(".caption").show(),g.parents(".thumbnails").find("li>.item[data-id="+f.find(".item").data("id")+"]").length?a("#already-in-use-error").modal().find("#item-to-use").html(f.attr("data-original-title")):g.is(".placeholder")?b.Copy(f,g):(b.WarningModal.find("#old-item").html(g.attr("data-original-title")),b.WarningModal.find("#new-item").html(f.attr("data-original-title")),b.WarningModal.modal(),b.DropToElement=g,b.DraggedElement=f)}),a(".all-games .selected-game").removeClass("selected-game")}})})},b.Copy=function(a,c){var d=Handlebars.compile("{{>crosspromo_list_item}}"),e={logo:a.data("logo"),platform_name:a.data("platform-name"),name:a.find("h6").data("original-title"),id:a.find(".item").data("id"),promo_game_id:a.find(".item").data("id"),description:a.data("crosspromo-description"),price:a.data("price")};console.log(e),c.data("old-id",c.attr("id")),c.before(d(e)),c.attr("id",c.find(".item").data("id")),c.find(".caption").show(),c.attr("rel",a.find("h6").attr("rel")).attr("data-original-title",a.find("h6").attr("data-original-title")),b.Add(c.prev(),a)},b.ResetPlaceholder=function(){a("#crosspromo-lists .placeholder").attr("rel",""),a("#crosspromo-lists .placeholder").attr("data-original-title","")},b.Add=function(c,d){var e=a("#crosspromo_base_game").val(),f=d.find(".item").data("id"),g=c.parents(".crosspromo-type").data("list-id");e&&f&&b.Save(c,e,f,g)},b.Remove=function(c,d){a.get(App.URL+"crosspromo/delete/"+c,function(){App.Tooltip("hide"),d&&d(),b.TriggerLoadAllGames()})},b.Save=function(c,d,e,f){var g=a(".csrf-form").find("[type=hidden]").attr("name"),h=a(".csrf-form").find("[type=hidden]").attr("value"),i={},j=c;i[g]=h,i.promo_game_id=e,i.base_game_id=d,i.list_id=f,a.post(App.URL+"crosspromo/edit/",i,function(a){App.Tooltip("hide"),c.prev().attr("id",a),c.find(".edit-description").attr("data-crosspromo-id",a),b.ResetPlaceholder()})},b.sortable=function(b,c){var d=b.data("type"),e={stop:function(b,e){c&&c(a(e.item).parent().sortable("toArray"),d)}};d||(e.placeholder="dnd-li-active"),b.sortable(e),b.disableSelection()},b.prototype={sortable:function(b,c){var d=this,e={stop:function(d,e){b&&b(a(e.item).parents("ul:first").sortable("toArray"),c)}};c||(e.placeholder="dnd-li-active"),d.el.sortable(e),this.el.disableSelection()}},b.LoadAllGames=function(){},b.TriggerLoadAllGames=function(){a("body").trigger("crosspromo-laod-games")},b.LoadForGame=function(c){b.BaseGameId=c,a.getJSON(App.URL+"crosspromo/for_game/"+c,function(d){App.Template.load("crosspromo/list.html",a(".accordion-inner"),d,function(){b.sortable(a(".crosspromo-list-items"),b.UpdateOrder),b.sortable(a("#crosspromo-lists"),b.UpdateOrder),b.DragAndDropGames(),App.Tooltip(),a('[data-toggle="switch"]').switchbtn(),a(".all-games").find("li.hide").removeClass("hide"),a(".all-games").find("[data-id="+c+"]").parents("li").addClass("hide"),a(".games-filter").find("[data-platform="+d.platform.id+"]").trigger("click"),App.Tooltip("hide")})})},b.Empty=function(b){b&&a.get(App.URL+"crosspromo/empty_promo_game/"+b,function(a){})},b.CopyListModal=function(b){a("#copy-list-modal").modal(),a("#copy-list-form").attr("action",a("#copy-list-form").data("action")+b.data("list-id")),a("#copy-list-modal").on("hide",function(){a(this).find("button").attr("disabled",!1),a(this).find("select").val("").trigger("liszt:updated")})},b.CopyList=function(b){App.Utils.save(b.attr("action"),b.serialize(),function(c){c.error&&(b.find(".alert-error").html(c.error).show(),b.find(".button").attr("disabled",!1)),c.success&&a("#copy-list-modal").modal("hide")},function(){})},a(function(){b.TriggerLoadAllGames(),a("body").on("click",".copy-list-modal",function(c){c.preventDefault(),b.CopyListModal(a(this))}),a("body").on("submit","#copy-list-form",function(c){c.preventDefault(),b.CopyList(a(this))}),a("body").on("change","#crosspromo_base_game",function(c){b.LoadForGame(a(this).val()),a("#crosspromo-games>.thumbnails").hide(),window.location.hash=a(this).val(),c.preventDefault()}),a("body").on("click",".crosspromo-selected-game",function(c){var d=a(this);d.parents("ul:first").find(".selected").removeClass("selected"),d.parents(".item:first").addClass("selected"),b.Selected=a(this).data("id"),b.LoadForGame(a(this).data("id")),c.preventDefault()}),a("body").off("click",".layout-remove"),a("body").on("click",".layout-remove",function(c){var d=a(this);b.Remove(d.parents("li:first").attr("id"),function(){var a=d.parents("li:first");a.removeAttr("data-original-title").removeAttr("rel").empty()}),c.preventDefault()}),a("body").off("click","#overwrite-yes"),a("body").on("click","#overwrite-yes",function(c){b.Empty(b.DropToElement.attr("id")),b.Copy(b.DraggedElement,b.DropToElement),a("#overwrite-warning").modal("hide"),c.preventDefault()}),b.WarningModal.on("hide",function(){b.DropToElement=null,b.DraggedElement=null})}),App.Crosspromo=b}(jQuery),!function(a){App.Modal=!1,App.Datepicker=function(){a(".datepicker").datepicker({dateFormat:"yy-mm-dd",changeYear:!0,changeMonth:!0,showMonthAfterYear:!0,yearRange:"1990:+5"})},App.TriggerDatepicker=function(){a("body").on("click",".trigger-datepicker"
,function(){a(this).prev().datepicker("show")})},App.showNotification=function(b){var c=a("#loading-global");c.html(b).show(),setTimeout(function(){c.hide(),c.html("Working...")},4e3)},App.select=function(a){App.unselect(),a.parents(".item").addClass("selected")},App.unselect=function(){a(".items").find(".selected").removeClass("selected")},App.disableFormButton=function(){a("body").delegate("form","submit",function(){a(this).find("button").attr("disabled",!0)})},App.Loader=function(){a("#loading-global").ajaxStart(function(){a(this).show()}).ajaxStop(function(){var b=a(this);b.html(App.Message);var c=App.Message===undefined||App.Message==="Working..."?100:6e3;setTimeout(function(){b.html("Working..."),App.Message="Working...",b.hide()},c)})},App.Dialog=function(){a("body").delegate("a[rel*=dialog]","click",function(){a(".dialog").remove();var b=a(this),c=a("<div />",{"class":"dialog",id:"dialog_"+(new Date).getTime(),title:b.attr("title")}).html('<p style = "width: 300px;text-align:center"><img src = "'+App.URL+'images/pie.gif" /></p>');return c.dialog({modal:!1,width:"auto",minWidth:500,position:[Math.floor(window.innerWidth/2-150),70],open:function(d,e){c.html(a("<img />",{src:b.attr("href")})),c.dialog("option","position",[Math.floor((window.innerWidth-c.width())/2),window.pageYOffset]),a(".ui-dialog").css("top",window.pageYOffset+70)}}),!1}),a("body").delegate(".close-dialog","click",function(){return a(".ui-dialog-titlebar-close").trigger("click"),!1})},App.enhanceChosen=function(){a(".chosen-select-all").bind("click",function(b){b.preventDefault();var c=a(this).parents("div:first").find(".chosen");c.find("option").attr("selected",!0),c.trigger("liszt:updated")}),a(".chosen-cancel-all").bind("click",function(b){b.preventDefault();var c=a(this).parents("div:first").find(".chosen");c.find("option").removeAttr("selected"),c.trigger("liszt:updated")})},App.Tooltip=function(b){a("[rel=tooltip]").tooltip(b||null)},App.PrettifyUpload=function(){a("input[type=file]").prettifyUpload({text:""})},App.ModalElement=a("#delete-confirmation"),App.ModalElement.on("hidden",function(){App.Modal=!1}),App.DeleteItem=function(){a("body").delegate(".delete-item","click",function(b){var c=a(this),d=App.ModalElement;App.Modal?a.get(c.attr("href"),function(){c.data("trigger")==="reload"?(c.data("location")==="r"&&App.Nav.reloadRightPanel(),c.data("location")==="l"&&App.Nav.reloadContetPanel(),c.data("location")==="b"&&(App.Nav.reloadRightPanel(),App.Nav.reloadContetPanel())):(c.data("location")==="r"&&App.Nav.CloseRightPanel(),App.Nav.reloadContetPanel()),d.modal("hide")}):(App.Modal=!0,a("#delete-yes").attr("href",a(this).attr("href")),a("#the-item").html(c.data("modal-header")),a("#delete-yes").data("trigger",c.data("trigger")),a("#delete-yes").data("location",c.data("location")),d.modal()),b.preventDefault()})},App.SwitchItem=function(){a("body").delegate(".switch-item","click",function(b){var c=a(this);a.get(c.attr("href"),function(){App.Nav.reloadRightPanel()}),b.preventDefault()})},App.AutoHeight=function(){a(".right-side-scroll").css("height",a(".sidebar-navigation-wrapper-right .well").height()-200)},App.FilterGlobalGames=function(){a("body").on("change","#filter-games-select",function(b){var c=a(this),d=c.val();if(a("#list-of-all-games").length){var e=a("#list-of-all-games");e.children().hide(),e.find("[data-id="+d+"]").parents("li:first").show(),window.location.hash="game/"+d}else window.location=App.URL+"game/#edit/"+d;b.preventDefault()})},App.FilterGames=function(b){var c=b.data("platform"),d=a(".games-list").children();b.parents("ul").find(".active").removeClass("active"),b.parents("li:first").addClass("active"),c==="all"?d.show():a.each(d,function(b,d){var e=a(d).data("platforms");!e||a.inArray(c.toString(),e)===-1?a(d).hide():a(d).show()})},a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){b[this.name]!==undefined?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},a.fn.spin=function(b){return this.each(function(){var c=a(this),d=c.data();d.spinner&&(d.spinner.stop(),delete d.spinner),b!==!1&&(d.spinner=(new Spinner(a.extend({color:c.css("color")},b))).spin(this))}),this},App.PreloadImages=function(){var b=a("[data-src]");a.each(b,function(b,c){a(c).attr("src")||a(c).parent().spin(),a(c).attr("src",a(c).data("src")).bind("load",function(){a(c).parent().find(".spinner").remove()})})},a(function(){a(".chosen").chosen({no_results_text:"No results matched"}),a("body").on("click",".games-filter a",function(b){App.FilterGames(a(this)),b.preventDefault()}),App.PreloadImages(),a("#username").focus(),App.FilterGlobalGames(),App.AutoHeight(),App.SwitchItem(),App.DeleteItem(),App.Tooltip(),App.Datepicker(),App.TriggerDatepicker(),a("body").delegate("[data-unselect]","click",App.unselect),App.disableFormButton(),App.Loader(),App.Dialog(),App.enhanceChosen(),a("i.w").parents("li").hover(function(){a(this).find("i.w").css("opacity",1)},function(){a(this).find("i.w").css("opacity",.25)}),a("a[rel=popover]").popover().click(function(a){a.preventDefault()}),a(".accordion").collapse("show"),a(window).hashchange(function(){window.location.hash.slice(1).length&&(App.Crosspromo.LoadForGame(window.location.hash.slice(1)),a("#crosspromo_base_game").val(window.location.hash.slice(1)).trigger("liszt:updated"))}),a(window).hashchange()})}(jQuery);